.\" Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SMOKEPING_INSTALL 7"
.TH SMOKEPING_INSTALL 7 "2018-01-30" "2.7.3" "SmokePing"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
smokeping_install \- How to install SmokePing
.SH "OVERVIEW"
.IX Header "OVERVIEW"
This document explains how to setup SmokePing at your site.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
.SS "Prerequisites"
.IX Subsection "Prerequisites"
SmokePing does not stand alone. It relies on various other tools and
services being present. Apart from a Unix \s-1OS\s0 and a working Perl installation
you need the following components:
.IP "RRDtool 1.2.x or later" 4
.IX Item "RRDtool 1.2.x or later"
Smokeping uses RRDtool for logging and graphing. If your linux distro provides
an rrdtool  package with perl support, use this. If you want to get the latest
and greatest version, compile your own: <http://oss.oetiker.ch/rrdtool/>
.Sp
Ubuntu:
.Sp
.Vb 1
\& sudo apt install rrdtool librrds\-perl
.Ve
.Sp
RedHat:
.Sp
.Vb 1
\& sudo yum install rrdtool perl\-rrdtool
.Ve
.IP "FPing (optional)" 4
.IX Item "FPing (optional)"
Go to <http://www.fping.org/> to grab a copy.
.Sp
Note that fping must be installed setuid root. It seems that older versions
of fping report round trip times in 0.1 milliseconds instead of 1 milliseconds
as advertised ... SmokePing tries to figure this out. It tells
you when it starts ... let me know if it gets it wrong.
.IP "EchoPing  (Optional)" 4
.IX Item "EchoPing (Optional)"
<https://github.com/bortzmeyer/echoping/>
.Sp
You need this to run the EchoPing probes
.IP "Curl (Optional)" 4
.IX Item "Curl (Optional)"
<http://curl.haxx.se/>
.Sp
You need this for the Curl probe.
.IP "dig (Optional)" 4
.IX Item "dig (Optional)"
<http://www.isc.org/sw/bind/>
.Sp
You need this for the \s-1DNS\s0 probe.
.IP "\s-1SSH\s0 (Optional)" 4
.IX Item "SSH (Optional)"
<http://www.openssh.org/>
.Sp
You need this for the \s-1SSH\s0 probe.
.IP "Webserver" 4
.IX Item "Webserver"
<http://httpd.apache.org/>
.Sp
Well I won't get much into this. The important thing is, to have a webserver
which allows you to run \s-1CGI\s0 and preferably FastCGI scripts. If you are using
Apache I strongly recommend using the \fIsuexec\fR system for running \s-1CGI\s0
scripts as a particular user.
.Sp
See <http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html> and
<http://httpd.apache.org/docs/2.2/mod/mod_suexec.html> for more information
on this.
.IP "Perl 5.10.1 or later." 4
.IX Item "Perl 5.10.1 or later."
If you still have an older version, maybe have a look at perlbrew.
.Sp
Ubuntu:
.Sp
.Vb 1
\& sudo apt install perl
.Ve
.Sp
RedHat:
.Sp
.Vb 1
\& sudo yum install perl\-core
.Ve
.SS "Installation"
.IX Subsection "Installation"
Once the tools listed above are in place, you can start setting up SmokePing
itself. Unpack the tar archive and run the included configure script:
.PP
.Vb 1
\& ./configure \-\-prefix=/opt/smokeping
.Ve
.PP
Configure will verify that all the required perl modules are available.
If some are missing it will tell you to run the module build script.
Just follow the instructions on screen and then run configure again.
Once it completes, you can run
.PP
.Vb 1
\& make install
.Ve
.PP
to finish your setup.
.SS "Configuration"
.IX Subsection "Configuration"
Use the \fIetc/config.dist\fR file as a template to create your own smokeping configuration file.
See smokeping_config for details.
.IP "Installing the webinterface" 4
.IX Item "Installing the webinterface"
Copy the content of the \fIPREFIX/htdocs\fR directory to the place where your webserver
expects its data. Maybe to \fI/var/www/smokeping\fR.
.Sp
Edit the \fIsmokeping.fcgi\fR script to point to your smokeping_cgi script.
.Sp
If you have no FastCGI support in your webserver, you may want to use the
\&\fIsmokeping.cgi\fR script.
.IP "\fIetc/basepage.html\fR" 4
.IX Item "etc/basepage.html"
Edit the html template to your likings. Please do not remove the link to the
SmokePing counter and my name from the template.  The content of the
template will be renderd by smokeping.cgi.  This means that all embedded
links must be relative to smokeping.cgi.
If you are using \s-1HTTP\s0 authentication, then the template variable \f(CW\*(C`authuser\*(C'\fR will be populated
from the \f(CW$ENV{REMOTE_USER}\fR environment variable.
.IP "\fIetc/smokemail\fR" 4
.IX Item "etc/smokemail"
If you are going to use the \fB\s-1DYNAMIC\s0\fR \s-1IP\s0 support, customize the contents of this file.
.SS "Starting the Smokeping Daemon"
.IX Subsection "Starting the Smokeping Daemon"
With all the scaffolding in place, you can now launch the smokeping daemon and
have it gather data for you. First you may want to run it in debug mode to see what
it is doing
.PP
.Vb 1
\& ./bin/smokeping \-\-config=/opt/smokeping/etc/config \-\-debug
.Ve
.PP
once all is well, start it up as a daemon. I would recomend you enable the
logfile option so that you can see if it runs into trouble.
.PP
.Vb 1
\& ./bin/smokeping \-\-config=/opt/smokeping/etc/config \-\-logfile=smoke.log
.Ve
.PP
Once the system works, you may want to put a SmokePing startup script into
your \fI/etc/init.d\fR tree. Check out smokeping for further information.
.PP
You can now open the smokeping.cgi webpage to look at your data.
.PP
See the smokeping_cgi documentation on how to setup the smokeping web interface.
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 2001, 2011 by Tobias Oetiker. All right reserved.
.SH "LICENSE"
.IX Header "LICENSE"
This program is free software; you can redistribute it
and/or modify it under the terms of the \s-1GNU\s0 General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.
.PP
This program is distributed in the hope that it will be
useful, but \s-1WITHOUT ANY WARRANTY\s0; without even the implied
warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS FOR A PARTICULAR
PURPOSE.\s0  See the \s-1GNU\s0 General Public License for more
details.
.PP
You should have received a copy of the \s-1GNU\s0 General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 675 Mass Ave, Cambridge, \s-1MA
02139, USA.\s0
.SH "AUTHOR"
.IX Header "AUTHOR"
Tobias Oetiker <tobi@oetiker.ch>
